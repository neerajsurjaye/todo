(()=>{"use strict";let e=(()=>{let e=e=>{let t=document.getElementById("project-list"),d=[];for(var o=0;o<e.length;o++)d.push(document.createElement("div")),d[o].classList.add("project-element"),d[o].textContent=e[o],d[o].dataset.name=e[o],t.appendChild(d[o])},d=e=>{let t=document.getElementById("todos"),d=[];for(var o=0;o<e.length;o++)d.push(n(e[o],o)),t.appendChild(d[o])},o=()=>{document.getElementById("todos").innerHTML=""},n=(e,t)=>{let d=document.createElement("div");d.classList.add("cls-todo"),d.dataset.location=t;let o=document.createElement("div");o.textContent=e.title,o.classList.add("title"),d.appendChild(o);let n=document.createElement("div");n.textContent=e.description,d.appendChild(n),n.classList.add("desc");let l=document.createElement("div");l.textContent=e.dueDate,d.appendChild(l),l.classList.add("due-date");let r=document.createElement("div");3==e.priority?r.style.backgroundColor="red":2==e.priority?r.style.backgroundColor="yellow":r.style.backgroundColor="green",d.appendChild(r),r.classList.add("priority");let a=document.createElement("div");return a.classList.add("todo-close"),a.textContent="x",d.appendChild(a),d},l=e=>{let t=document.getElementById("projects-add"),d=document.getElementById("todo-add");"add-projects"==e.target.id?t.style.display="flex":"add-todo"==e.target.id&&(d.style.display="flex")},r=e=>{e.target.parentElement.parentElement.style.display="none"},a=()=>{let d=document.getElementById("input-project");t.add_project(d.value),document.getElementById("project-list").innerHTML="",e(t.get_projList()),d.parentElement.parentElement.style.display="none"},s=e=>{let n=document.getElementById("inp-title").value,l=document.getElementById("inp-desc").value,a=document.getElementById("inp-date").value,s=document.getElementById("inp-prior").value;t.add_todo(t.get_current(),n,l,a,s),o(),d(t.get_todos(t.get_current())),r(e)},c=e=>{e.target.classList.contains("todo-close")&&t.remove_todo(e.target.parentElement.dataset.location),o(),d(t.get_todos(t.get_current()))},i=()=>{(()=>{let e=document.getElementById("add-projects"),t=document.getElementById("add-todo");e.addEventListener("click",l),t.addEventListener("click",l)})(),(()=>{let e=document.getElementsByClassName("close");for(var t=0;t<e.length;t++)e[t].addEventListener("click",r)})(),document.getElementById("submit-projects").addEventListener("click",a),document.getElementById("submit-todo").addEventListener("click",s),document.getElementById("container").addEventListener("click",c)};return i(),{draw_project:e,draw_todos:d,init:i,change_project:e=>{document.getElementById("side-panel").addEventListener("click",(n=>{((e,n)=>{for(let l=0;l<n.length;l++)n[l].property==e.target.dataset.name&&(o(),d(t.get_todos(e.target.dataset.name)),t.update_current(e.target.dataset.name))})(n,e)}))}}})(),t=(()=>{let t=[],d="default",o=(e,t,d,o)=>({title:e,description:t,dueDate:d,priority:o,status:0}),n=e=>({property:e,todos:[]});t.push(n("default"));let l=e=>{if(null!=e)return e};return e.change_project(t),{add_project:e=>{t.push(n(e))},add_todo:(e,d,n,l,r)=>{for(let a=0;a<t.length;a++)t[a].property==e&&t[a].todos.push(o(d,n,l,r))},get_todos:e=>{for(let d=0;d<t.length;d++)if(t[d].property==e)return t[d].todos},get_projList:()=>{let e=[];for(let d=0;d<t.length;d++)e.push(t[d].property);return e},save:()=>{localStorage.setItem("projects",JSON.stringify(t))},load:()=>{JSON.parse(localStorage.getItem("projects"))},projects:t,current_project:d,remove_todo:e=>{console.log(d,t);for(let o=0;o<t.length;o++)if(d==t[o].property)return t[o].todos[e]=null,void(t[o].todos=t[o].todos.filter(l))},update_current:e=>{d=e},get_current:()=>d}})();t.add_project("second"),t.add_todo("second","list",324,234,0),t.add_todo("second","asdf",324,234,0),t.add_todo("second","asdfsda",324,234,2),t.add_todo("default","list",324,234,0),t.add_todo("default","asdf",324,234,0),t.get_todos("second"),t.get_projList(),t.load(),e.init(),e.draw_project(t.get_projList()),e.draw_todos(t.get_todos("default"))})();