(()=>{"use strict";let e=(()=>{let e=e=>{let t=document.getElementById("project-list"),d=[];for(var o=0;o<e.length;o++)d.push(document.createElement("div")),d[o].classList.add("project-element"),d[o].textContent=e[o],d[o].dataset.name=e[o],t.appendChild(d[o])},d=e=>{let t=document.getElementById("todos"),d=[];for(var o=0;o<e.length;o++)d.push(n(e[o],o)),t.appendChild(d[o])},o=()=>{document.getElementById("todos").innerHTML=""},n=(e,t)=>{let d=document.createElement("div");d.classList.add("cls-todo"),d.dataset.location=t;let o=document.createElement("div");o.textContent=e.title,o.classList.add("title"),d.appendChild(o);let n=document.createElement("div");n.textContent=e.description,d.appendChild(n),n.classList.add("desc");let l=document.createElement("div");l.textContent=e.dueDate,d.appendChild(l),l.classList.add("due-date");let a=document.createElement("div");3==e.priority?a.style.backgroundColor="red":2==e.priority?a.style.backgroundColor="yellow":a.style.backgroundColor="green",d.appendChild(a),a.classList.add("priority");let r=document.createElement("div");return r.classList.add("todo-close"),r.textContent="x",d.appendChild(r),d},l=e=>{let t=document.getElementById("projects-add"),d=document.getElementById("todo-add");"add-projects"==e.target.id?t.style.display="flex":"add-todo"==e.target.id&&(d.style.display="flex")},a=e=>{e.target.parentElement.parentElement.style.display="none"},r=()=>{let d=document.getElementById("input-project");t.add_project(d.value),document.getElementById("project-list").innerHTML="",e(t.get_projList()),d.parentElement.parentElement.style.display="none"},s=e=>{let n=document.getElementById("inp-title").value,l=document.getElementById("inp-desc").value,r=document.getElementById("inp-date").value,s=document.getElementById("inp-prior").value;console.log(n),t.add_todo(t.current_project,n,l,r,s),o(),d(t.get_todos(t.current_project)),a(e)},c=()=>{(()=>{let e=document.getElementById("add-projects"),t=document.getElementById("add-todo");e.addEventListener("click",l),t.addEventListener("click",l)})(),(()=>{let e=document.getElementsByClassName("close");for(var t=0;t<e.length;t++)e[t].addEventListener("click",a)})(),document.getElementById("submit-projects").addEventListener("click",r),document.getElementById("submit-todo").addEventListener("click",s)};return c(),{draw_project:e,draw_todos:d,init:c,change_project:e=>{document.getElementById("side-panel").addEventListener("click",(n=>{((e,n)=>{for(let l=0;l<n.length;l++)n[l].property==e.target.dataset.name&&(o(),d(t.get_todos(e.target.dataset.name)),t.current_project=e.target.dataset.name)})(n,e)}))}}})(),t=(()=>{let t=[],d=(e,t,d,o)=>({title:e,description:t,dueDate:d,priority:o,status:0}),o=e=>({property:e,todos:[]});return t.push(o("default")),e.change_project(t),{add_project:e=>{t.push(o(e))},add_todo:(e,o,n,l,a)=>{for(let r=0;r<t.length;r++)t[r].property==e&&t[r].todos.push(d(o,n,l,a))},get_todos:e=>{for(let d=0;d<t.length;d++)if(t[d].property==e)return t[d].todos},get_projList:()=>{let e=[];for(let d=0;d<t.length;d++)e.push(t[d].property);return e},save:()=>{localStorage.setItem("projects",JSON.stringify(t))},load:()=>{JSON.parse(localStorage.getItem("projects"))},projects:t,current_project:"default"}})();t.add_project("second"),t.add_todo("second","list",324,234,0),t.add_todo("second","asdf",324,234,0),t.add_todo("second","asdfsda",324,234,2),t.add_todo("default","list",324,234,0),t.add_todo("default","asdf",324,234,0),t.get_todos("second"),t.get_projList(),t.load(),e.init(),e.draw_project(t.get_projList()),e.draw_todos(t.get_todos("default"))})();